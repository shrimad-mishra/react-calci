{"ast":null,"code":"import _slicedToArray from\"/home/shrimadmishra/shrimad-calci/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/shrimadmishra/shrimad-calci/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useReducer}from\"react\";import DigitButton from\"./DigitButton\";import OperationButton from\"./operationButton\";import\"./styles.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ACTIONS={ADD_DIGIT:\"add-digit\",CHOOSE_OPERATION:\"choose-operation\",CLEAR:\"clear\",DELETE_DIGIT:\"delete-digit\",EVALUATE:\"evaluate\"};function reducer(state,_ref){var type=_ref.type,payload=_ref.payload;switch(type){case ACTIONS.ADD_DIGIT:if(state.overwrite){return _objectSpread(_objectSpread({},state),{},{currentOperand:payload.digit,overwrite:false});}if(payload.digit===\"0\"&&state.currentOperand===\"0\"){return state;}if(payload.digit===\".\"&&state.currentOperand.includes(\".\")){return state;}return _objectSpread(_objectSpread({},state),{},{currentOperand:\"\".concat(state.currentOperand||\"\").concat(payload.digit)});case ACTIONS.CHOOSE_OPERATION:if(state.currentOperand==null&&state.previousOperand==null){return state;}if(state.currentOperand==null){return _objectSpread(_objectSpread({},state),{},{operation:payload.operation});}if(state.previousOperand==null){return _objectSpread(_objectSpread({},state),{},{operation:payload.operation,previousOperand:state.currentOperand,currentOperand:null});}return _objectSpread(_objectSpread({},state),{},{previousOperand:evaluate(state),operation:payload.operation,currentOperand:null});case ACTIONS.CLEAR:return{};case ACTIONS.DELETE_DIGIT:if(state.overwrite){return _objectSpread(_objectSpread({},state),{},{overwrite:false,currentOperand:null});}if(state.currentOperand==null)return state;if(state.currentOperand.length===1){return _objectSpread(_objectSpread({},state),{},{currentOperand:null});}return _objectSpread(_objectSpread({},state),{},{currentOperand:state.currentOperand.slice(0,-1)});case ACTIONS.EVALUATE:if(state.operation==null||state.currentOperand==null||state.previousOperand==null){return state;}return _objectSpread(_objectSpread({},state),{},{overwrite:true,previousOperand:null,operation:null,currentOperand:evaluate(state)});}}function evaluate(_ref2){var currentOperand=_ref2.currentOperand,previousOperand=_ref2.previousOperand,operation=_ref2.operation;var prev=parseFloat(previousOperand);var current=parseFloat(currentOperand);if(isNaN(prev)||isNaN(current))return\"\";var computation=\"\";switch(operation){case\"+\":computation=prev+current;break;case\"-\":computation=prev-current;break;case\"*\":computation=prev*current;break;case\"รท\":computation=prev/current;break;}return computation.toString();}var INTEGER_FORMATTER=new Intl.NumberFormat(\"en-us\",{maximumFractionDigits:0});function formatOperand(operand){if(operand==null)return;var _operand$split=operand.split(\".\"),_operand$split2=_slicedToArray(_operand$split,2),integer=_operand$split2[0],decimal=_operand$split2[1];if(decimal==null)return INTEGER_FORMATTER.format(integer);return\"\".concat(INTEGER_FORMATTER.format(integer),\".\").concat(decimal);}function App(){var _useReducer=useReducer(reducer,{}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],currentOperand=_useReducer2$.currentOperand,previousOperand=_useReducer2$.previousOperand,operation=_useReducer2$.operation,dispatch=_useReducer2[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"calculator-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"output\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"previous-operand\",children:[formatOperand(previousOperand),\" \",operation]}),/*#__PURE__*/_jsx(\"div\",{className:\"current-operand\",children:formatOperand(currentOperand)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"span-two\",onClick:function onClick(){return dispatch({type:ACTIONS.CLEAR});},children:\"AC\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return dispatch({type:ACTIONS.DELETE_DIGIT});},children:\"DEL\"}),/*#__PURE__*/_jsx(OperationButton,{operation:\"\\xF7\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"1\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"2\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"3\",dispatch:dispatch}),/*#__PURE__*/_jsx(OperationButton,{operation:\"*\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"4\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"5\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"6\",dispatch:dispatch}),/*#__PURE__*/_jsx(OperationButton,{operation:\"+\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"7\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"8\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"9\",dispatch:dispatch}),/*#__PURE__*/_jsx(OperationButton,{operation:\"-\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\".\",dispatch:dispatch}),/*#__PURE__*/_jsx(DigitButton,{digit:\"0\",dispatch:dispatch}),/*#__PURE__*/_jsx(\"button\",{className:\"span-two\",onClick:function onClick(){return dispatch({type:ACTIONS.EVALUATE});},children:\"=\"})]});}export default App;","map":{"version":3,"names":["useReducer","DigitButton","OperationButton","ACTIONS","ADD_DIGIT","CHOOSE_OPERATION","CLEAR","DELETE_DIGIT","EVALUATE","reducer","state","type","payload","overwrite","currentOperand","digit","includes","previousOperand","operation","evaluate","length","slice","prev","parseFloat","current","isNaN","computation","toString","INTEGER_FORMATTER","Intl","NumberFormat","maximumFractionDigits","formatOperand","operand","split","integer","decimal","format","App","dispatch"],"sources":["/home/shrimadmishra/shrimad-calci/src/App.js"],"sourcesContent":["import { useReducer } from \"react\"\nimport DigitButton from \"./DigitButton\"\nimport OperationButton from \"./operationButton\"\nimport \"./styles.css\"\n\nexport const ACTIONS = {\n  ADD_DIGIT: \"add-digit\",\n  CHOOSE_OPERATION: \"choose-operation\",\n  CLEAR: \"clear\",\n  DELETE_DIGIT: \"delete-digit\",\n  EVALUATE: \"evaluate\",\n}\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case ACTIONS.ADD_DIGIT:\n      if (state.overwrite) {\n        return {\n          ...state,\n          currentOperand: payload.digit,\n          overwrite: false,\n        }\n      }\n      if (payload.digit === \"0\" && state.currentOperand === \"0\") {\n        return state\n      }\n      if (payload.digit === \".\" && state.currentOperand.includes(\".\")) {\n        return state\n      }\n\n      return {\n        ...state,\n        currentOperand: `${state.currentOperand || \"\"}${payload.digit}`,\n      }\n    case ACTIONS.CHOOSE_OPERATION:\n      if (state.currentOperand == null && state.previousOperand == null) {\n        return state\n      }\n\n      if (state.currentOperand == null) {\n        return {\n          ...state,\n          operation: payload.operation,\n        }\n      }\n\n      if (state.previousOperand == null) {\n        return {\n          ...state,\n          operation: payload.operation,\n          previousOperand: state.currentOperand,\n          currentOperand: null,\n        }\n      }\n\n      return {\n        ...state,\n        previousOperand: evaluate(state),\n        operation: payload.operation,\n        currentOperand: null,\n      }\n    case ACTIONS.CLEAR:\n      return {}\n    case ACTIONS.DELETE_DIGIT:\n      if (state.overwrite) {\n        return {\n          ...state,\n          overwrite: false,\n          currentOperand: null,\n        }\n      }\n      if (state.currentOperand == null) return state\n      if (state.currentOperand.length === 1) {\n        return { ...state, currentOperand: null }\n      }\n\n      return {\n        ...state,\n        currentOperand: state.currentOperand.slice(0, -1),\n      }\n    case ACTIONS.EVALUATE:\n      if (\n        state.operation == null ||\n        state.currentOperand == null ||\n        state.previousOperand == null\n      ) {\n        return state\n      }\n\n      return {\n        ...state,\n        overwrite: true,\n        previousOperand: null,\n        operation: null,\n        currentOperand: evaluate(state),\n      }\n  }\n}\n\nfunction evaluate({ currentOperand, previousOperand, operation }) {\n  const prev = parseFloat(previousOperand)\n  const current = parseFloat(currentOperand)\n  if (isNaN(prev) || isNaN(current)) return \"\"\n  let computation = \"\"\n  switch (operation) {\n    case \"+\":\n      computation = prev + current\n      break\n    case \"-\":\n      computation = prev - current\n      break\n    case \"*\":\n      computation = prev * current\n      break\n    case \"รท\":\n      computation = prev / current\n      break\n  }\n\n  return computation.toString()\n}\n\nconst INTEGER_FORMATTER = new Intl.NumberFormat(\"en-us\", {\n  maximumFractionDigits: 0,\n})\nfunction formatOperand(operand) {\n  if (operand == null) return\n  const [integer, decimal] = operand.split(\".\")\n  if (decimal == null) return INTEGER_FORMATTER.format(integer)\n  return `${INTEGER_FORMATTER.format(integer)}.${decimal}`\n}\n\nfunction App() {\n  const [{ currentOperand, previousOperand, operation }, dispatch] = useReducer(\n    reducer,\n    {}\n  )\n\n  return (\n    <div className=\"calculator-grid\">\n      <div className=\"output\">\n        <div className=\"previous-operand\">\n          {formatOperand(previousOperand)} {operation}\n        </div>\n        <div className=\"current-operand\">{formatOperand(currentOperand)}</div>\n      </div>\n      <button\n        className=\"span-two\"\n        onClick={() => dispatch({ type: ACTIONS.CLEAR })}\n      >\n        AC\n      </button>\n      <button onClick={() => dispatch({ type: ACTIONS.DELETE_DIGIT })}>\n        DEL\n      </button>\n      <OperationButton operation=\"รท\" dispatch={dispatch} />\n      <DigitButton digit=\"1\" dispatch={dispatch} />\n      <DigitButton digit=\"2\" dispatch={dispatch} />\n      <DigitButton digit=\"3\" dispatch={dispatch} />\n      <OperationButton operation=\"*\" dispatch={dispatch} />\n      <DigitButton digit=\"4\" dispatch={dispatch} />\n      <DigitButton digit=\"5\" dispatch={dispatch} />\n      <DigitButton digit=\"6\" dispatch={dispatch} />\n      <OperationButton operation=\"+\" dispatch={dispatch} />\n      <DigitButton digit=\"7\" dispatch={dispatch} />\n      <DigitButton digit=\"8\" dispatch={dispatch} />\n      <DigitButton digit=\"9\" dispatch={dispatch} />\n      <OperationButton operation=\"-\" dispatch={dispatch} />\n      <DigitButton digit=\".\" dispatch={dispatch} />\n      <DigitButton digit=\"0\" dispatch={dispatch} />\n      <button\n        className=\"span-two\"\n        onClick={() => dispatch({ type: ACTIONS.EVALUATE })}\n      >\n        =\n      </button>\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}